{% extends "base.html" %}

{% block title %}My Services - SHOP&SERV{% endblock %}

{% block content %}
<div class="container" style="padding: 2rem 20px;">
    <div class="dashboard-header">
        <h1>My Services</h1>
        <a href="{{ url_for('add_service') }}" class="btn btn-primary">+ Add New Service</a>
    </div>
    
    {% if services %}
    <div class="table-responsive">
        <table class="data-table">
            <thead>
                <tr>
                    <th>Image</th>
                    <th>Name</th>
                    <th>Category</th>
                    <th>Price</th>
                    <th>Duration</th>
                    <th>Status</th>
                    <th>Actions</th>

                </tr>
            </thead>
            <tbody>
                <tr>
                    <td>
                        {% if service.image %}
                        <img src="{{ url_for('static', filename='uploads/' ~ service.image) }}"
                             alt="{{ service.name }}" style="width: 50px; height: 50px; object-fit: cover; border-radius: 4px;">
                        {% else %}
                        <div style="width: 50px; height: 50px; background: var(--light); border-radius: 4px;"></div>
                        {% endif %}
                    </td>
                    <td>{{ service.name }}</td>
                    <td>{{ service.category or '-' }}</td>
                    <td>{{ service.price|format_currency }}</td>
                    <td>{{ service.duration or '-' }}</td>
                    <td>
                        <span class="badge badge-{% if service.is_active %}success{% else %}danger{% endif %}">
                            {{ 'Active' if service.is_active else 'Inactive' }}
                        </span>
                    </td>
                    <td>
                        <a href="{{ url_for('edit_service', service_id=service.id) }}" class="btn btn-sm btn-primary">Edit</a>
                        <button data-delete-url="{{ url_for('delete_service', service_id=service.id) }}" data-id="{{ service.id }}" data-message="Are you sure you want to delete this service?" class="btn btn-sm btn-danger delete-btn">Delete</button>
                    </td>
                </tr>
                {% endfor %}
            </tbody>
        </table>
    </div>
    {% else %}
    <div class="empty-state">
        <p>You haven't added any services yet.</p>
        <a href="{{ url_for('add_service') }}" class="btn btn-primary">Add Your First Service</a>
    </div>
    {% endif %}
</div>
{% endblock %}

{% block extra_js %}
<script>
    document.addEventListener('DOMContentLoaded', function() {
        // Handle delete buttons
        document.querySelectorAll('.delete-btn').forEach(button => {
            button.addEventListener('click', function() {
                const url = this.getAttribute('data-delete-url');
                const id = this.getAttribute('data-id');
                const message = this.getAttribute('data-message');
                safeDelete(url, id, message);
            });
        });
    });
</script>
{% endblock %}